<div class="container-fluid">
    <h3>{{todoForm.value | json }}</h3>
    <button data-toggle="modal" (click)="resetForm();"data-target="#formModal">Add Todo</button>
    <table class="table">
        <thead class="thead-dark">
            <tr>
                <th scope="col" class="glyphicon glyphicon-plus"></th>
                <th scope="col">Name</th>
                <th scope="col">Description</th>
                <th scope="col">Handle</th>
                <th scope="col">Fav</th>
                <th scope="col">Actions</th>

            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let todo of todoList;" class="accordion-toggle" data-toggle="collapse" data-target="#12345-aaa">
                <th class="glyphicon glyphicon-plus" data-toggle="modal" data-target="#myModal"
                    (click)="showSubTodo(todo)"></th>
                <td>1</td>
                <td>{{todo.name}}</td>
                <td>{{todo.description}}</td>
                <td>
                    <button
                        (click)="updateFavourite(todo);">{{todo.isFavourite ? 'Remove from Favourite' : 'Add to Favourite'}}</button>

                </td>
                <td>
                    <span data-toggle="modal" data-target="#formModal" (click)="fillForm(todo);"
                        class="glyphicon glyphicon-pencil"></span>
                    <span (click)="delete(todo.id);" class="glyphicon glyphicon-trash"></span>
                </td>
            </tr>
        </tbody>


    </table>

</div>





<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>

            </div>
            <div class="modal-body">
                <table class="table" *ngIf="subTodos && subTodos.length >0">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Name</th>
                            <th scope="col">Description</th>
                            <th scope="col">Fav</th>
                            <th scope="col">Action</th>

                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let todo of subTodos;" class="accordion-toggle" data-toggle="collapse"
                            data-target="#12345-aaa">
                            <th scope="row">#</th>
                            <td>{{todo.name}}</td>
                            <td>{{todo.description}}</td>
                            <td>{{todo.isFavourite}}</td>
                            <span data-toggle="modal" data-target="#formModal" (click)="fillForm(todo);"
                                class="glyphicon glyphicon-pencil"></span>
                            <span class="glyphicon glyphicon-trash"></span>
                        </tr>
                    </tbody>
                </table>
                <P *ngIf="subTodos && subTodos.length ==0">No Sub Todos here</P>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>


<!-- 
<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="">Open Modal</button> -->

<!-- Modal -->
<div id="formModal" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <section class="profile-authentication-area ">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-2 col-md-12">
                                <div class="login-form">
                                    <form [formGroup]="todoForm" (ngSubmit)="onSubmit();">
                                        <div class="form-group">
                                            <label>Todo</label>
                                            <input type="text" class="form-control" formControlName="name"
                                                placeholder="Name">
                                        </div>
                                        <div class="form-group">
                                            <label>Description</label>
                                            <input type="text" class="form-control" formControlName="description"
                                                placeholder="Description">
                                        </div>
                                        <div class="form-group">
                                            <label>IsFavroute</label>
                                            <div>
                                                <input type="radio" formControlName="isFavourite" value="true">Yes
                                                <input type="radio" formControlName="isFavourite" value="false">No
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label>Is SUbtodo Of</label>
                                            <select formControlName="parent_id">
                                                <option>None</option>
                                                <option *ngFor="let entry of todoMapForDrowpDown | keyvalue" value="entry.key">
                                                    {{entry.value}}
                                                </option>
                                            </select>
                                        </div>
                                        

                                        <button type="submit">{{isNew ? 'Save' : 'Update'}}</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>